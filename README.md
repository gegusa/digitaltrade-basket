# ðŸ§º DigitalTrade Basket Service

Basket Service Ð¾Ñ‚Ð²ÐµÑ‡Ð°ÐµÑ‚ Ð·Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ð¾Ð¹ Ð¿Ð¾ÐºÑƒÐ¿Ð°Ñ‚ÐµÐ»Ñ Ð² Ñ€Ð°Ð¼ÐºÐ°Ñ… Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ½Ð¾Ð¹ Ð°Ñ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ñ‹ Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚-Ð¼Ð°Ð³Ð°Ð·Ð¸Ð½Ð° **DigitalTrade**.

## ðŸ“Œ ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ Ð²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸

- Ð”Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ
- Ð˜Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ñ‚Ð¾Ð²Ð°Ñ€Ð°
- Ð£Ð´Ð°Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÐµÐ¹ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñ‹
- ÐŸÐ¾Ð»ÑƒÑ‡ÐµÐ½Ð¸Ðµ Ñ‚ÐµÐºÑƒÑ‰ÐµÐ³Ð¾ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñ‹ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
- ÐžÑ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°ÐºÐ°Ð·Ð° (checkout) Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¾Ð¹ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ Ð² Kafka

## ðŸš€ REST API

Ð‘Ð°Ð·Ð¾Ð²Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ: `/api/basket`

| ÐœÐµÑ‚Ð¾Ð´  | ÐŸÑƒÑ‚ÑŒ             | ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ                              |
|--------|------------------|----------------------------------------|
| `GET`  | `/get`           | ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ Ð¿Ð¾ `clientId`        |
| `POST` | `/add-item`      | Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ñ‚Ð¾Ð²Ð°Ñ€ Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ              |
| `POST` | `/change-quantity` | Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ñ‚Ð¾Ð²Ð°Ñ€Ð° Ð² ÐºÐ¾Ñ€Ð·Ð¸Ð½Ðµ  |
| `POST` | `/delete`        | Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ                       |
| `POST` | `/checkout`      | ÐžÑ„Ð¾Ñ€Ð¼Ð¸Ñ‚ÑŒ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ñƒ (checkout)           |

> ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¸ Ñ‚ÐµÐ»Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²/Ð¾Ñ‚Ð²ÐµÑ‚Ð¾Ð² Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÑÑŽÑ‚ÑÑ Ð² ÑÐ¾Ð¾Ñ‚Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽÑ‰Ð¸Ñ… ÐºÐ»Ð°ÑÑÐ°Ñ… Ð¸Ð· Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð° Ð¸Ð¼Ñ‘Ð½ `DigitalTrade.Basket.Api.Contracts`.

## ðŸ§© Ð’Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ Ð´Ñ€ÑƒÐ³Ð¸Ð¼Ð¸ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸

### Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ð¹Ð½Ð¾Ðµ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ Ñ‡ÐµÑ€ÐµÐ· Kafka

#### ðŸ“¤ ÐŸÑ€Ð¸ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸Ð¸ Ð·Ð°ÐºÐ°Ð·Ð°

ÐŸÐ¾ÑÐ»Ðµ Ð²Ñ‹Ð·Ð¾Ð²Ð° `/checkout` ÑÐµÑ€Ð²Ð¸Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑÐµÑ‚ Ð² Kafka ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ:

- **Ð¢Ð¾Ð¿Ð¸Ðº:** `digitaltrade.ordering.checkouts`
- **Ð¡Ð¾Ð±Ñ‹Ñ‚Ð¸Ðµ:** `BasketCheckoutRequestedEvent`

Ð­Ñ‚Ð¾ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ðµ Ð¿Ð¾Ñ‚Ñ€ÐµÐ±Ð»ÑÐµÑ‚ÑÑ **DigitalTrade.Ordering** Ð´Ð»Ñ ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð·Ð°ÐºÐ°Ð·Ð°.

#### ðŸ“¥ ÐŸÑ€Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¸ Ð¸Ð»Ð¸ ÑƒÐ´Ð°Ð»ÐµÐ½Ð¸Ð¸ Ñ‚Ð¾Ð²Ð°Ñ€Ð°

Ð¡ÐµÑ€Ð²Ð¸Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ðµ Kafka Ñ‚Ð¾Ð¿Ð¸ÐºÐ¸:

- `digitaltrade.catalog.changed` â†’ `ProductDeletedEvent`
- `digitaltrade.catalog.changed` â†’ `ProductUpdatedEvent`

ÐÐ° Ð¾ÑÐ½Ð¾Ð²Ðµ ÑÑ‚Ð¸Ñ… ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ð¹ ÐºÐ¾Ñ€Ð·Ð¸Ð½Ð° Ð°Ð²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÑÐµÑ‚ÑÑ: ÑƒÐ´Ð°Ð»ÑÑŽÑ‚ÑÑ Ð¸Ð»Ð¸ Ð¸Ð·Ð¼ÐµÐ½ÑÑŽÑ‚ÑÑ Ñ‚Ð¾Ð²Ð°Ñ€Ñ‹, Ð½ÐµÐ´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ð´Ð»Ñ Ð¿Ð¾ÐºÑƒÐ¿ÐºÐ¸.

## ðŸ–¼ï¸ ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð½Ð°Ñ ÑÑ…ÐµÐ¼Ð°

```mermaid
graph TD
    subgraph
        UI[Client / Frontend]
        UI --> |REST| BasketService
    end

    subgraph
        BasketService[[Basket Service]]
        BasketService -->|Kafka Event: CheckoutRequestedEvent| Kafka
        Kafka --> OrderingService
        CatalogService -->|Kafka Event: ProductDeletedEvent / ProductUpdatedEvent| Kafka
        Kafka --> BasketService
    end

    subgraph
        OrderingService[[Ordering Service]]
        CatalogService[[Catalog Service]]
    end
